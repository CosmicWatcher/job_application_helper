<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job Scraper</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/header.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/scraper.css') }}"
    />
  </head>
  <body>
    {% with active_page = 'scrape' %} {% include 'header.html' %} {% endwith %}

    <div class="container">
      <h1>Job Scraper</h1>

      <div class="scraper-form">
        <div class="form-group">
          <label for="time-period">Time Period:</label>
          <select id="time-period" name="time-period">
            <option value="24h">Last 24 Hours</option>
            <option value="week">Last Week</option>
          </select>
        </div>

        <div class="form-group">
          <label for="location">Location:</label>
          <select id="location" name="location">
            <option value="toronto">Toronto</option>
            <option value="vancouver">Vancouver</option>
            <option value="canada">Canada</option>
          </select>
        </div>

        <div class="form-group">
          <label for="keywords">Keywords:</label>
          <input
            type="text"
            id="keywords"
            name="keywords"
            placeholder="e.g. software developer, python"
            autocomplete="off"
          />
        </div>

        <button id="start-scrape-btn" class="btn">Start Scraping</button>
      </div>

      <div id="status-container" class="status-container hidden">
        <h2>Scraping Status</h2>

        <!-- Live counters section -->
        <div class="live-counters">
          <div class="counter-box">
            <div class="counter-value" id="jobs-scraped-count">0</div>
            <div class="counter-progress">
              <span id="jobs-scraped-progress">0/0</span>
              <div class="progress-bar">
                <div id="jobs-scraped-bar" class="progress-fill"></div>
              </div>
            </div>
            <div class="counter-label">Jobs Scraped</div>
            <button id="stop-scrape-btn" class="btn btn-stop hidden">
              Stop Scraping
            </button>
          </div>
          <div class="counter-box">
            <div class="counter-value" id="jobs-analyzed-count">0</div>
            <div class="counter-progress">
              <span id="jobs-analyzed-progress">0/0</span>
              <div class="progress-bar">
                <div id="jobs-analyzed-bar" class="progress-fill"></div>
              </div>
            </div>
            <div class="counter-label">Jobs Analyzed</div>
            <button id="stop-analysis-btn" class="btn btn-stop hidden">
              Stop Analysis
            </button>
          </div>
        </div>

        <div class="status-details">
          <div class="status-item">
            <span>Scraping in progress:</span>
            <span id="is-running-status">No</span>
          </div>
          <div class="status-item">
            <span>Scrape complete:</span>
            <span id="scrape-complete-status">No</span>
          </div>
          <div class="status-item">
            <span>Analysis complete:</span>
            <span id="analysis-complete-status">No</span>
          </div>
        </div>

        <div id="error-container" class="error-container hidden">
          <h3>Error:</h3>
          <p id="error-message"></p>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/scraper.js') }}"></script>
  </body>
</html>
